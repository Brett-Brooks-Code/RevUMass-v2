// After editing, run `npx prisma generate`

generator client {
  provider = "prisma-client-js"
  output   = "../node_modules/.prisma/client"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Reviewable {
  id              Int           @id @default(autoincrement())

  food            Food?         @relation("food_reviewable")
  dorm            Dorm?         @relation("dorm_reviewable")
  studySpot       StudySpot?    @relation("study_spot_reviewable")
  reviews         Review[]      @relation("review")

  @@map("reviewables")
}

model Food {
  id              Int           @id
  name            String
  reviewableId    Int           @unique @map("reviewable_id")
  imagePath       String?       @map("image_path")

  reviewable      Reviewable    @relation("food_reviewable", fields: [reviewableId], references: [id])

  @@map("food")
}

model Dorm {
  id              Int           @id
  name            String
  dormAreaId      Int           @map("dorm_area_id")
  reviewableId    Int           @unique @map("reviewable_id")
  imagePath       String?       @map("image_path")

  dormArea        DormArea      @relation("dorm_area", fields: [dormAreaId], references: [id])
  reviewable      Reviewable    @relation("dorm_reviewable", fields: [reviewableId], references: [id])

  @@map("dorms")
}

model DormArea {
  id              Int           @id
  name            String

  dorms           Dorm[]        @relation("dorm_area")

  @@map("dorm_areas")
}

model StudySpot {
  id              Int           @id
  name            String
  buildingId      Int           @map("building_id")
  reviewableId    Int           @unique @map("reviewable_id")
  imagePath       Int?          @map("image_path")

  building        Building      @relation("building", fields: [buildingId], references: [id])
  reviewable      Reviewable    @relation("study_spot_reviewable", fields: [reviewableId], references: [id])

  @@map("study_spots")
}

model Building {
  id              Int           @id
  name            String

  studySpots      StudySpot[]   @relation("building")

  @@map("buildings")
}

model Review {
  id              Int           @id
  username        String
  reviewableId    Int           @map("reviewable_id")
  stars           Int
  review          String?

  reviewable      Reviewable    @relation("review", fields: [reviewableId], references: [id])

  @@map("reviews")
}
